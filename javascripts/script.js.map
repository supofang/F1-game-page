{"version":3,"sources":["script.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"script.js","sourcesContent":["(function () {\r\n\r\n  const myOffcanvas = document.querySelector('.offcanvas')\r\n  const bsOffcanvas = new bootstrap.Offcanvas(myOffcanvas)\r\n  let draggie = new Draggabilly('.draggie-btn', {\r\n    axis: 'y',\r\n    //未指定就是上一層\r\n    containment: true,\r\n    // containment: '.draggie'\r\n  });\r\n  draggie.on('staticClick', function () {\r\n    // console.log('staticClick');\r\n    bsOffcanvas.show()\r\n  });\r\n\r\n  // 頁面載入後，先自動開啟一次Modal\r\n  window.addEventListener('DOMContentLoaded', function () {\r\n    setTimeout(function () {\r\n      openNews()\r\n    })\r\n  })\r\n\r\n  function openNews() {\r\n    const news = document.querySelector('#news');\r\n    const newsModal = new bootstrap.Modal(document.getElementById('iframeModal'));\r\n    const newsPage = document.querySelector('#iframePage');\r\n\r\n    newsModal.show();\r\n\r\n    function onModalShown() {\r\n      let newsSrc = news.dataset.src;\r\n      newsPage.src = `${newsSrc}`;\r\n      console.log(newsSrc);\r\n\r\n      // 移除監聽事件\r\n      newsModal._element.removeEventListener('shown.bs.modal', onModalShown);\r\n    }\r\n\r\n    // 添加監聽事件\r\n    newsModal._element.addEventListener('shown.bs.modal', onModalShown);\r\n  }\r\n\r\n\r\n  // 在iframe開啟指定頁面\r\n  let iframeSrc;\r\n  const iframeBtns = document.querySelectorAll('.iframe-btn');\r\n  const iframeModal = document.querySelector('#iframeModal');\r\n  const iframePage = document.querySelector('#iframePage');\r\n\r\n  iframeBtns.forEach(btn => {\r\n    btn.addEventListener('click', function () {\r\n      iframeSrc = this.dataset.src;\r\n      console.log(iframeSrc)\r\n    });\r\n  });\r\n\r\n  iframeModal.addEventListener('shown.bs.modal', function () {\r\n    iframePage.src = `${iframeSrc}`;\r\n  });\r\n\r\n  iframeModal.addEventListener('hide.bs.modal', function () {\r\n    iframePage.src = '';\r\n  });\r\n\r\n  //顯示禮包碼的區塊\r\n  const gameGifts = document.querySelectorAll('.game-gift');\r\n  gameGifts.forEach((gameGift) => {\r\n    let btnOpen = gameGift.querySelector('.btnOpen');\r\n    if (btnOpen) {\r\n      btnOpen.addEventListener('click', function () {\r\n        this.classList.add('d-none');\r\n\r\n        const gameGiftElement = this.closest('.game-gift').querySelector('.gift-number');\r\n        gameGiftElement.classList.remove('d-none')\r\n\r\n        const copyButton = gameGiftElement.querySelector('button')\r\n        let copyText = gameGiftElement.querySelector('p')\r\n        let copyInput = gameGiftElement.querySelector('input')\r\n\r\n        //複制序號\r\n        copyButton.addEventListener(\"click\", (e) => {\r\n          window.getSelection().selectAllChildren(copyText); //選取元素內的文字\r\n          // copyInput.select(); //input等輸入元素才使用.select()\r\n          document.execCommand(\"copy\"); //複製選取內容\r\n          e.target.classList.add('active')\r\n          // console.log(e.target)\r\n          window.getSelection().removeAllRanges(); //取消選取\r\n          setTimeout(function () {\r\n            e.target.classList.remove('active');\r\n          }, 1500);\r\n        });\r\n\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  //全螢幕切換\r\n  const fullscreen = document.querySelector('#fullscreen')\r\n  fullscreen.addEventListener('click', toggleFullScreen)\r\n\r\n  function toggleFullScreen() {\r\n    if (!document.fullscreenElement &&  // 不在全螢幕模式下\r\n      !document.mozFullScreenElement &&\r\n      !document.webkitFullscreenElement &&\r\n      !document.msFullscreenElement) {  // 確認瀏覽器支援全螢幕\r\n      if (document.documentElement.requestFullscreen) {\r\n        document.documentElement.requestFullscreen();  // 全螢幕模式\r\n        bsOffcanvas.hide()\r\n      } else if (document.documentElement.msRequestFullscreen) {\r\n        document.documentElement.msRequestFullscreen();  // IE11全螢幕模式\r\n        bsOffcanvas.hide()\r\n      } else if (document.documentElement.mozRequestFullScreen) {\r\n        document.documentElement.mozRequestFullScreen();  // Firefox全螢幕模式\r\n        bsOffcanvas.hide()\r\n      } else if (document.documentElement.webkitRequestFullscreen) {\r\n        document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);  // Chrome和Safari全螢幕模式\r\n        bsOffcanvas.hide()\r\n      }\r\n    } else {\r\n      if (document.exitFullscreen) {\r\n        document.exitFullscreen();  // 退出全螢幕\r\n      } else if (document.msExitFullscreen) {\r\n        document.msExitFullscreen();  // IE11退出全螢幕\r\n      } else if (document.mozCancelFullScreen) {\r\n        document.mozCancelFullScreen();  // Firefox退出全螢幕\r\n      } else if (document.webkitExitFullscreen) {\r\n        document.webkitExitFullscreen();  // Chrome和Safari退出全螢幕\r\n      }\r\n    }\r\n  }\r\n\r\n})();"]}